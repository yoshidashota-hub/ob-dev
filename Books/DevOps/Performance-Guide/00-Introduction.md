# 第0章: はじめに

## パフォーマンスが重要な理由

```
┌─────────────────────────────────────────────────────────────┐
│              パフォーマンスとビジネス影響                     │
│                                                             │
│  Google の調査:                                              │
│  • ページ読み込み 1秒 → 3秒: 直帰率 32% 増加               │
│  • ページ読み込み 1秒 → 5秒: 直帰率 90% 増加               │
│  • ページ読み込み 1秒 → 6秒: 直帰率 106% 増加              │
│                                                             │
│  Amazon:                                                    │
│  • 100ms の遅延 = 売上 1% 減少                              │
│                                                             │
│  SEO への影響:                                               │
│  • Core Web Vitals は検索ランキング要因                      │
└─────────────────────────────────────────────────────────────┘
```

## Core Web Vitals

```
┌─────────────────────────────────────────────────────────────┐
│                   Core Web Vitals                            │
│                                                             │
│  ┌─────────────────────────────────────────────────────┐   │
│  │  LCP (Largest Contentful Paint)                      │   │
│  │  最大コンテンツの表示時間                             │   │
│  │  Good: ≤ 2.5s │ Needs Improvement: ≤ 4s │ Poor: > 4s │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                             │
│  ┌─────────────────────────────────────────────────────┐   │
│  │  INP (Interaction to Next Paint)                     │   │
│  │  操作からの応答時間                                   │   │
│  │  Good: ≤ 200ms │ Needs Improvement: ≤ 500ms │ Poor   │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                             │
│  ┌─────────────────────────────────────────────────────┐   │
│  │  CLS (Cumulative Layout Shift)                       │   │
│  │  レイアウトのずれ                                     │   │
│  │  Good: ≤ 0.1 │ Needs Improvement: ≤ 0.25 │ Poor      │   │
│  └─────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────┘
```

## パフォーマンス改善のアプローチ

```
┌────────────────────────────────────────────────────────────┐
│                    改善サイクル                              │
│                                                            │
│         ┌─────────┐                                        │
│         │  計測   │                                        │
│         └────┬────┘                                        │
│              │                                             │
│              ▼                                             │
│         ┌─────────┐                                        │
│         │  分析   │                                        │
│         └────┬────┘                                        │
│              │                                             │
│              ▼                                             │
│         ┌─────────┐                                        │
│         │  改善   │                                        │
│         └────┬────┘                                        │
│              │                                             │
│              ▼                                             │
│         ┌─────────┐                                        │
│         │  検証   │                                        │
│         └────┬────┘                                        │
│              │                                             │
│              └─────────────→ 繰り返し                      │
└────────────────────────────────────────────────────────────┘
```

## レイヤー別の最適化ポイント

```
┌────────────────────────────────────────────────────────────┐
│                    最適化レイヤー                            │
│                                                            │
│  User                                                      │
│    │                                                       │
│    ▼                                                       │
│  ┌──────────────────────────────────────────────────────┐ │
│  │ CDN (CloudFront)                                      │ │
│  │ • キャッシュ • 圧縮 • 地理的分散                       │ │
│  └──────────────────────────────────────────────────────┘ │
│    │                                                       │
│    ▼                                                       │
│  ┌──────────────────────────────────────────────────────┐ │
│  │ Frontend (Next.js/React)                              │ │
│  │ • バンドルサイズ • レンダリング • 画像最適化          │ │
│  └──────────────────────────────────────────────────────┘ │
│    │                                                       │
│    ▼                                                       │
│  ┌──────────────────────────────────────────────────────┐ │
│  │ Backend (API/Lambda)                                  │ │
│  │ • レスポンス時間 • コネクション管理 • キャッシュ      │ │
│  └──────────────────────────────────────────────────────┘ │
│    │                                                       │
│    ▼                                                       │
│  ┌──────────────────────────────────────────────────────┐ │
│  │ Database (RDS/DynamoDB)                               │ │
│  │ • クエリ最適化 • インデックス • コネクションプール    │ │
│  └──────────────────────────────────────────────────────┘ │
└────────────────────────────────────────────────────────────┘
```

## パフォーマンスバジェット

```typescript
// パフォーマンス目標を定義
const performanceBudget = {
  // Core Web Vitals
  lcp: 2500, // ms
  inp: 200, // ms
  cls: 0.1,

  // バンドルサイズ
  javascript: 300, // KB (gzip)
  css: 50, // KB (gzip)
  totalSize: 1000, // KB

  // API レスポンス
  p50: 100, // ms
  p95: 300, // ms
  p99: 1000, // ms

  // データベース
  queryTime: 50, // ms
};
```

## 次のステップ

次章では、パフォーマンス計測の具体的な手法を学びます。
