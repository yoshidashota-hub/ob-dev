# 第0章: はじめに

## MongoDB とは

MongoDB は、スケーラブルで柔軟なドキュメント指向の NoSQL データベースです。

## RDBMS vs MongoDB

```
┌─────────────────────────────────────────────────────┐
│              RDBMS (PostgreSQL)                      │
│                                                     │
│  users テーブル     orders テーブル                  │
│  ┌─────────────┐   ┌─────────────┐                 │
│  │ id          │   │ id          │                 │
│  │ name        │◀──│ user_id     │                 │
│  │ email       │   │ total       │                 │
│  └─────────────┘   └─────────────┘                 │
│                                                     │
│  → JOIN で結合                                       │
└─────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────┐
│              MongoDB                                 │
│                                                     │
│  users コレクション                                  │
│  ┌─────────────────────────────────────────────┐   │
│  │ {                                            │   │
│  │   _id: ObjectId("..."),                     │   │
│  │   name: "John",                             │   │
│  │   email: "john@example.com",                │   │
│  │   orders: [                    // 埋め込み   │   │
│  │     { id: 1, total: 5000 },                 │   │
│  │     { id: 2, total: 3000 }                  │   │
│  │   ]                                         │   │
│  │ }                                           │   │
│  └─────────────────────────────────────────────┘   │
│                                                     │
│  → 1回の読み取りで完結                               │
└─────────────────────────────────────────────────────┘
```

## ユースケース

### MongoDB が向いているケース

- **柔軟なスキーマ**: 要件が頻繁に変わる
- **大量の読み取り**: キャッシュ的な用途
- **ドキュメント構造**: 階層的なデータ
- **スケーラビリティ**: 水平スケールが必要

### RDBMS が向いているケース

- **複雑なリレーション**: 多対多の関係
- **トランザクション重視**: 金融システム
- **厳密なスキーマ**: データ整合性が最重要

## ドキュメント構造

```javascript
// MongoDB のドキュメント
{
  _id: ObjectId("507f1f77bcf86cd799439011"),
  title: "MongoDB 入門",
  author: {
    name: "田中太郎",
    email: "tanaka@example.com"
  },
  tags: ["database", "nosql", "mongodb"],
  chapters: [
    { number: 1, title: "はじめに", pages: 20 },
    { number: 2, title: "インストール", pages: 15 }
  ],
  published: true,
  publishedAt: ISODate("2024-01-15T00:00:00Z"),
  metadata: {
    views: 1250,
    likes: 89
  }
}
```

## 主要概念

| 概念       | 説明                                     |
| ---------- | ---------------------------------------- |
| Database   | データベース（複数のコレクションを含む） |
| Collection | ドキュメントの集合（≒テーブル）          |
| Document   | JSON ライクなデータ単位（≒行）           |
| Field      | ドキュメント内のキー（≒列）              |
| \_id       | 自動生成される一意識別子                 |
| ObjectId   | 12バイトの一意識別子                     |

## MongoDB Atlas

MongoDB のマネージドサービス。

- **無料枠**: 512MB まで無料
- **グローバル**: 世界中のリージョン
- **自動バックアップ**: データ保護
- **Atlas Search**: 全文検索機能

```bash
# 接続文字列
mongodb+srv://user:password@cluster.xxxxx.mongodb.net/mydb
```

## 次のステップ

次章では、MongoDB のセットアップと基本的な接続方法を学びます。
