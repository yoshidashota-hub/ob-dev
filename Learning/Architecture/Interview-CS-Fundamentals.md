# CS 基礎 - 技術面接対策

## 概要

コンピュータサイエンスの基礎知識。アルゴリズム・データ構造、OS、コンパイラ、GC など。

---

## 1. アルゴリズム・データ構造

### フィボナッチ数列 100 万番目を求めるアプローチ

**問題点**

- 普通の再帰: 指数時間 O(2^n) → 論外
- 単純ループ: O(n) だが、100 万番目は約 20 万桁になる

**解決策: 行列累乗**

```
[[1,1],[1,0]]^n でフィボナッチ数列を計算
繰り返し二乗法で O(log n) 回の行列乗算
```

### LRU キャッシュの実装

**データ構造**: HashMap + 双方向連結リスト → O(1) の get/put

**操作**:

- `get`: Map で検索 → ノードをリスト先頭に移動
- `put`: 存在すれば更新して先頭へ、なければ追加、容量超過なら末尾削除

```typescript
class LRUCache<K, V> {
  private capacity: number;
  private cache: Map<K, Node<K, V>>;
  private head: Node<K, V>;
  private tail: Node<K, V>;

  get(key: K): V | undefined {
    /* ... */
  }
  put(key: K, value: V): void {
    /* ... */
  }
}
```

### Top-K 問題（大量ログから上位 K 件の URL を求める）

**アプローチ**:

- 全データをカウント → ソート: O(n log n)
- **サイズ K の Min Heap**: O(n log k) ← 推奨

**メモリ制約がある場合**:

- Count-Min Sketch（近似アルゴリズム）

### 文字列の類似度計算

| アルゴリズム           | 特徴               | ユースケース   |
| ---------------------- | ------------------ | -------------- |
| レーベンシュタイン距離 | 編集操作の最小回数 | スペルチェック |
| Jaro-Winkler           | 先頭一致を重視     | 名寄せ         |
| N-gram                 | 部分文字列の共通度 | あいまい検索   |

### ハッシュテーブルの衝突解決法

1. **チェイニング**: 同じハッシュ値のエントリをリンクリストで管理
2. **オープンアドレス法**: 衝突時に別スロットを探す（線形探査、二重ハッシュ）
3. **リハッシュ**: テーブルサイズを拡大して再配置

### B-Tree / B+Tree

**なぜ DB のインデックスに使われる？**

- 多分木構造で 1 ノード = 1 ディスクブロック
- ディスク I/O を最小化

**B+Tree の特徴**:

- リーフノードにのみデータを持つ
- リーフ間がリンクされている → レンジスキャンが効率的

---

## 2. OS・低レイヤー

### 仮想メモリ

**目的**: 物理メモリの抽象化、各プロセスに独立したアドレス空間を提供

**メリット**:

- [ ] プロセス間の分離（セキュリティ）
- [ ] 物理メモリより大きな空間
- [ ] ページング（必要な部分だけ物理メモリに）
- [ ] スワップによるメモリ不足対応

### システムコール

**定義**: ユーザー空間からカーネル空間への機能呼び出し

**例**:

- `read`/`write`: ファイル I/O
- `fork`/`exec`: プロセス生成
- `socket`/`connect`: ネットワーク

**注意**: コンテキストスイッチのコストがかかる

### ファイルディスクリプタ

- カーネルが管理する I/O リソース（ファイル、ソケット、パイプ）への参照番号
- プロセスごとに上限設定（`ulimit -n`）
- リーク（close 忘れ）で枯渇 → 新規接続不可

### コンテナ vs VM

| 項目             | VM               | コンテナ          |
| ---------------- | ---------------- | ----------------- |
| 仮想化           | OS ごと仮想化    | カーネル共有      |
| 分離方式         | ハイパーバイザー | namespace/cgroups |
| 重さ             | 重い             | 軽量・高速        |
| セキュリティ境界 | 強い             | 比較的弱い        |

### OOM Killer

**発動条件**: メモリ枯渇時にカーネルがプロセスを強制終了

**選択基準**: oom_score が高いプロセス

**対策**:

- [ ] 適切なリソース制限（Kubernetes limits）
- [ ] `oom_score_adj`で重要プロセスを保護
- [ ] メモリ使用量の監視とアラート

### プロセス vs スレッド

| 項目       | プロセス               | スレッド     |
| ---------- | ---------------------- | ------------ |
| メモリ空間 | 独立                   | 共有         |
| 通信       | IPC 必要               | 直接共有可能 |
| コスト     | フォーク時コピーコスト | 軽量         |
| 同期       | 不要（分離済み）       | 必要         |

### スタック vs ヒープ

| 項目   | スタック               | ヒープ       |
| ------ | ---------------------- | ------------ |
| 管理   | 自動                   | 手動/GC      |
| 速度   | 高速                   | 比較的遅い   |
| サイズ | 制限あり               | 動的確保     |
| 用途   | ローカル変数           | オブジェクト |
| 問題   | スタックオーバーフロー | 断片化       |

---

## 3. コンピュータサイエンス基礎

### ガベージコレクションの種類

| 方式         | 特徴                         | 問題点             |
| ------------ | ---------------------------- | ------------------ |
| 参照カウント | 参照数を追跡                 | 循環参照で回収不可 |
| Mark-Sweep   | 到達可能性でマーク           | Stop-the-World     |
| 世代別 GC    | 若いオブジェクトを頻繁に回収 | 複雑               |

### V8 エンジンの最適化

- **Hidden Class**: オブジェクト構造を追跡、高速アクセス
- **インラインキャッシュ**: プロパティアクセスを最適化
- **TurboFan**: JIT コンパイラで最適化

---

## 4. コンパイラ・言語処理系

### インタプリタ vs コンパイラ

| 項目           | コンパイラ | インタプリタ | JIT            |
| -------------- | ---------- | ------------ | -------------- |
| 変換タイミング | 事前       | 逐次         | 実行時         |
| 実行速度       | 速い       | 遅い         | 両方のメリット |
| 柔軟性         | 低い       | 高い         | 中間           |

### AST（抽象構文木）

**定義**: ソースコードの構造表現

**使用場面**:

- Linter
- Formatter
- Transpiler
- コード変換ツール

---

## 学習チェックリスト

### アルゴリズム

- [ ] 行列累乗を実装してみる
- [ ] LRU キャッシュを実装してみる
- [ ] Heap（優先度付きキュー）を実装してみる
- [ ] B-Tree の動作原理を理解する

### OS

- [ ] 仮想メモリの仕組みを説明できる
- [ ] プロセスとスレッドの違いを説明できる
- [ ] システムコールの例を 5 つ挙げられる

### GC

- [ ] Mark-and-Sweep の動作を説明できる
- [ ] 世代別 GC のメリットを説明できる

---

## 関連ノート

- [[Interview-Network]]
- [[Interview-Database]]
- [[Interview-Architecture]]
